
# filenames = ["/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim16_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim16_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim32_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim32_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim64_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim64_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim128_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+multitask/dim128_lr0.001_l20.0001_TransR/log0.log",
            
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim16_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim16_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim32_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim32_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim64_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim64_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim128_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+multitask/dim128_lr0.001_l20.0001_TransR/log0.log",
            
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim16_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim16_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim32_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim32_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim64_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim64_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim128_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+multitask/dim128_lr0.001_l20.0001_TransR/log0.log",
            
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim16_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim16_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim32_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim32_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim64_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim64_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim128_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/plus+iteration/dim128_lr0.001_l20.0001_TransR/log0.log",
            
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim16_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim16_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim32_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim32_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim64_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim64_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim128_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/mul+iteration/dim128_lr0.001_l20.0001_TransR/log0.log",
            
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim16_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim16_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim32_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim32_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim64_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim64_lr0.001_l20.0001_TransR/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim128_lr0.001_l20.0001_TransE/log0.log",
#             "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/Embedding_based/concat+iteration/dim128_lr0.001_l20.0001_TransR/log0.log",      
# ]

filenames = [
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim32_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim32_TransR_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim64_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim64_TransR_gcn/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim32_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim32_TransR_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim64_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim64_TransR_graphsage/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim32_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim32_TransR_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim64_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer2_dim64_TransR_lightgcn/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim32_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim32_TransR_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim64_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim64_TransR_gcn/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim32_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim32_TransR_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim64_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim64_TransR_graphsage/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim32_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim32_TransR_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim64_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/random-walk/nlayer4_dim64_TransR_lightgcn/log0.log",
    
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim32_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim32_TransR_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim64_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim64_TransR_gcn/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim32_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim32_TransR_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim64_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim64_TransR_graphsage/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim32_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim32_TransR_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim64_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer2_dim64_TransR_lightgcn/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim32_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim32_TransR_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim64_TransE_gcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim64_TransR_gcn/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim32_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim32_TransR_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim64_TransE_graphsage/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim64_TransR_graphsage/log0.log",
    
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim32_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim32_TransR_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim64_TransE_lightgcn/log0.log",
    "/home/jack/Desktop/WebInfo/lab2/src/stage2/trained_model/Douban/GNN_based/symmetric/nlayer4_dim64_TransR_lightgcn/log0.log", 
]

group = 4

if __name__ == '__main__':
    import re
    f2 = open('tmp.md', 'a')
    count = 0
    
    for filename in filenames:
        count += 1
        with open(filename, 'r') as f1:
            lines = [i for i in f1.readlines()]
            lastline = lines[-1]
            precision_pattern = 'Precision'
            precision_span = re.search(precision_pattern, lastline)
            if not precision_span:
                f2.write('None')
                f2.write('\n')
                if count % group == 0:
                    f2.write('\n\n')
                continue
            precision_end = precision_span.span()[1]
            precision = lastline[precision_end:].replace('[', '').replace(']', '').strip().split(',')[:2]
            recall_pattern = 'Recall'
            recall_end = re.search(recall_pattern, lastline).span()[1]
            recall = lastline[recall_end:].replace('[', '').replace(']', '').strip().split(',')[:2]
            ndcg_pattern = 'NDCG'
            ndcg_end = re.search(ndcg_pattern, lastline).span()[1]
            ndcg = lastline[ndcg_end:].replace('[', '').replace(']', '').strip().split(',')[:2]
            
            alist = [precision[0], recall[0], ndcg[0], precision[1], recall[1], ndcg[1]]
            f2.write('| '.join(alist)+'|'+'\n')
        if count % group == 0:
            f2.write('\n\n')
        

        
        